<div class="modal-content" id="cart-items-container">
    
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
    <div class="modal-header">
        <h5 class="modal-title" >
            <i class="fa-solid fa-basket-shopping"></i>&nbsp;&nbsp;–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; right: 1rem; top: 1rem;"></button>
    </div>
   
    {# –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞—è #}
    {% if not carts %}
        <div class="cart-item d-flex align-items-center" style="padding: 15px; margin: 15px;">           
            <div class="flex-grow-1 text-center" style="font-weight: 700; font-size: larger;" > 
                –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.<br>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É
            </div>            
        </div>
    {% endif %}
    <!-- –¢–µ–ª–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã-->
    {% for cart in carts %}
        <div class="modal-body">
            <div id="cartItems">                
                <!-- –ü–µ—Ä–µ—á–µ–Ω—å —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div class="cart-item d-flex align-items-center">
                    <img src="{{ cart.product.image.url }}" alt="–¢–æ–≤–∞—Ä" class="cart-item-img me-3">
                    <div class="flex-grow-1">
                        <h5 class="mb-1">{{cart.product.name}}</h5>
                        <p class="mb-1">
                            –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É: <span class="item-price" 
                                                data-price="{{ cart.product.sell_price }}">
                                                {{ cart.product.sell_price | floatformat:2 }}
                                            </span> ‚ÇΩ
                        </p>
                        <p class="mb-1">
                            –û–±—â–∞—è —Ü–µ–Ω–∞: <span class="item-total-price">{{ cart.products_price | floatformat:2 }}</span> ‚ÇΩ
                        </p>                                
                    <div class="small text-muted">–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{cart.product.category.title}}</div>
                    </div>
                    {# –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª-–≤–∞ —Ç–æ–≤–∞—Ä–∞ –≤ –∫—Ä–æ–∑–∏–Ω–µ #}
                    <div class="d-flex align-items-center">
                        <button class="btn btn-outline-secondary btn-sm me-2 znak-products decrement" 
                                data-cart-id="{{ cart.id }}"
                                data-cart-change-url="{% url "cart:cart_change" %}">
                                {% csrf_token %}           
                            <i class="fa-solid fa-minus"></i>
                        </button>
                        <input type="text" value="{{cart.quantity}}" min="1"
                            class="form-control form-control-sm text-center fw-bold fs-6 number" 
                            style="width: 60px;" 
                            readonly>
                        <button class="btn btn-outline-secondary btn-sm ms-2 znak-products increment" 
                                data-cart-id="{{ cart.id }}"
                                data-cart-change-url="{% url "cart:cart_change" %}">
                               {% csrf_token %}
                            <i class="fa-solid fa-plus"></i>
                        </button>
                    </div>
                    {# –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã #}
                    <a class="btn btn-danger btn-sm ms-3 cart-delete col_cart_del" 
                       data-cart-id="{{ cart.id }}"
                       href="{% url "cart:cart_remove" %}">
                        {% csrf_token %}
                        <i class="fa-solid fa-trash"></i>                         
                    </a>
                </div>
            </div>
        </div>
    {% endfor %}
    <!-- –ù–∏–∂–Ω—è—è —á–∞—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
    <div class="modal-footer flex-column align-items-start">
        <!-- –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è -->
        <div class="w-100 mb-3">
            <p class="mb-1 fs-5">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: <span id="totalQuantity">{{carts.total_quantity}}</span></p>
            <p class="cart-total fs-5">–û–±—â–∞—è —Ü–µ–Ω–∞: <span id="totalPrice">{{carts.total_price | floatformat:2}}</span> ‚ÇΩ</p>
        </div>
        <hr class="hr" />
        {# –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω #}
        {% if user.is_authenticated %}
        <!-- –†–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã -->
            {% if carts %}
                {# –§–æ—Ä–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ #}
                <form action="{% url "orders:create_order" %}" method="post" id="formCreateOrder">
                    {% csrf_token %}
                    {# –î–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ –µ—Å—Ç—å —Ç–æ–≤–∞—Ä—ã #}
                    <div class="w-100 mb-3">
                        {# >>> –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <<< #}
                        <input type="text" 
                            class="form-control d-none" 
                            id="id_username" 
                            name="username"
                            readonly 
                            value="{{user.username}}" required>
                        <label for="id_username" class="d-none">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                        <div class="row g-2">
                            <div class="col-md">
                                <div class="form-floating">
                                    <input type="text" 
                                        class="form-control" 
                                        id="id_first_name" 
                                        name="first_name"
                                        readonly 
                                        value="{{user.first_name}}" required>
                                    <label for="id_first_name">–í–∞—à–µ –∏–º—è</label>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="form-floating">
                                    <input type="text"
                                        class="form-control" 
                                        id="id_last_name" 
                                        name="last_name"
                                        readonly 
                                        value="{{user.last_name}}" required>
                                    <label for="id_last_name">–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è</label>
                                </div>
                            </div>
                            <div class="col-md">
                                <div class="form-floating">
                                    <input type="phone" 
                                        class="form-control" 
                                        id="id_phone_number"
                                        name="phone_number" 
                                        readonly 
                                        value="{{user.phone_number}}" required>
                                    <label for="id_phone_number">–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω</label>
                                </div>
                            </div>
                        </div>
                        {# –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã #}
                        <br>
                        <div class="row g-2">
                            <span>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</span>
                            <div class="form-check mb-2">
                                <input class="form-check-input" 
                                       type="radio" 
                                       name="payment_on_get"
                                       id="id_payment_on_get" 
                                       value="0" 
                                       checked>
                                <label class="form-check-label" for="id_payment_on_get">
                                    üíµ –ù–∞–ª–∏—á–Ω—ã–º–∏/–ö–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" 
                                       type="radio" 
                                       name="payment_on_get"
                                       id="id_payment_on_get" 
                                       value="1">
                                <label class="form-check-label" for="id_payment_on_get">
                                    üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π –æ–Ω–ª–∞–π–Ω
                                </label>
                            </div>
                        </div>                    
                    </div>
                    {% endif %}
                    {% else %}
                        <!-- –ë–ª–æ–∫ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
                        <div id="authNotice" class="w-100 text-center mb-3">
                            <p class="fs-5">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ <strong>–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º</strong> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.</p>
                            <a href="{% url "user:login" %}" class="btn btn-link">
                                <i class="fa-regular fa-user me-2"></i>–í–æ–π—Ç–∏
                            </a>
                            <a href="{% url "user:register" %}" class="btn btn-link">
                                <i class="fa-solid fa-registered me-2"></i>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                            </a>
                        </div>
                    {% endif %}
                    <hr class="hr" />
                    <!-- –ö–Ω–æ–ø–∫–∏ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" –∏ "–ó–∞–∫—Ä—ã—Ç—å" -->
                    {% if user.is_authenticated %}
                    <div class="d-flex justify-content-between w-100">                        
                        {% if carts %}
                            <hr>
                            <button type="submit" class="btn btn-success" id="checkoutButtonOrder">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </form>
                        {% endif %}                                        
                     {% endif %}
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
    </div>
</div>